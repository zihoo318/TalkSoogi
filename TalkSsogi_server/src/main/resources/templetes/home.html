<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>톡쏙이</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FCFFF3;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
        }

        /* 네비게이션 바 스타일 */
        .navbar {
            width: 100%;
            background-color: #fff;
            padding: 10px 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        /* 로고 스타일 */
        .navbar .logo {
            margin-left: 10px; /* 기존 margin-left 수정 */
        }
        .navbar .logo img {
            max-height: 60px;
        }

        .navbar .nav-links {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-right: 40px; /* 오른쪽 여백 */
        }

        .navbar .nav-links form {
            display: inline-block;
        }

        .navbar .nav-links button {
            text-decoration: none;
            color: #333;
            font-size: 18px;
            padding: 5px 10px;
            background: none;
            border: none;
            cursor: pointer;
            background-color: transparent;
        }

        .navbar .nav-links button:hover {
            color: #007bff;
        }

        .container {
            display: flex;
            align-items: center;
            justify-content: center;
            max-width: 1200px;
            width: 100%;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            margin-top: 120px; /* 네비게이션 바 때문에 추가된 여백 */
            margin-bottom: 20px; /* 추가된 박스 간격을 위해 추가 */
        }

        .mascot-section {
            flex: 1;
            text-align: left;
            margin-right: 10px;
        }

        .mascot-section img {
            max-width: 100%;
            height: auto;
            max-width: 300px;
        }

        .text-section {
            flex: 2;
            text-align: left;
            padding-right: 20px;
        }

        .text-section h1 {
            font-size: 36px;
            color: #333;
            margin-bottom: 20px;
        }

        .text-section p {
            font-size: 18px;
            color: #555;
            margin-bottom: 30px;
        }

        .upload-section {
            text-align: left;
            margin-bottom: 10px;
        }

        .upload-section input[type="file"] {
            padding: 15px;
            margin: 10px 0;
            font-size: 18px;
        }

        .upload-section button {
            padding: 15px 25px;
            font-size: 18px;
            background-color: #73d37a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .upload-section button:hover {
            background-color: #4CAF50;
        }

        .button-section {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(2, auto);
            gap: 10px;
            justify-items: center;
        }

        .button-section .feature-button {
            padding: 15px 20px;
            font-size: 18px;
            background-color: #CCFFCC;
            color: #333;
            text-align: center;
            border-radius: 10px;
            border: 2px solid #CCFFCC;
            cursor: pointer;
            width: 80%;
        }

        .button-section .feature-button:hover {
            background-color: #80EB88;
            border-color: #80EB88;
        }

        /* 워드 클라우드 박스 스타일 */
        .wordcloud-container {
            display: flex;
            width: 100%;
            height: 450px; /* 박스 높이 조정 */
        }

        .wordcloud-left {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        .wordcloud-left .speech-bubble-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .wordcloud-left .speech-bubble {
            width: 80%;
            max-width: 600px;
            height: auto;
            position: relative;
            z-index: 1;
        }

        .wordcloud-left .dropdown-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 2;
        }

        .wordcloud-speech-bubble-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 120%;
            max-width: 1000px;
            /* 이동을 위한 추가 margin */
            margin-left: 220px; /* 왼쪽 여백 추가 */
        }

        .wordcloud-speech-bubble {
            width: 100% !important; /* 원하는 너비를 비율로 설정하거나, */
            max-width: 800px; /* 최대 너비를 설정하여 화면 크기에 따라 유동적으로 조절 */
            height: auto; /* 높이는 자동으로 조절 */
            position: relative;
            z-index: 1; /* 이미지가 가장 뒤에 위치하도록 설정 */

        }

        .wordcloud-dropdown-container {
            position: absolute;
            top: 48%; /* 드롭다운,텍스트,돋보기 상하 위치 조절 */
            left: 30%; /* 드롭다운,텍스트,돋보기 좌우 위치 조절 */
            transform: translate(-50%, -50%) translateX(100px); /* 드롭다운과 텍스트, 돋보기를 오른쪽으로 이동 */
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 2; /* 드롭다운과 텍스트, 돋보기가 이미지 위에 위치하도록 설정 */
        }

        .wordcloud-dropdown select {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .wordcloud-dropdown .label {
            font-size: 18px;
            color: #333;
        }

        .wordcloud-left .magnifier {
            cursor: pointer; /* 클릭할 수 있는 요소임을 나타내는 커서 */
            max-width: 30px; /* 이미지 최대 너비 설정 */
            height: auto; /* 이미지 높이 자동 조절 */
            margin-left: 10px; /* 드롭다운과의 간격 조절 */
        }

        .wordcloud-left .rounded-box {
            width: 80%;
            max-width: 600px;
            background-color: #CCFFCC;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px; /* 위쪽 박스와의 간격 조정 */
            margin-left: 150px; /* 오른쪽으로 이동시키기 위한 여백 추가 */
        }

        .wordcloud-right {
            display: flex;
            justify-content: center;
            position: relative; /* 부모 요소에 상대적 위치를 설정 */
        }

        .wordcloud-image-container {
            position: relative; /* 자식 요소들에 대한 절대 위치 설정 */
        }

        .wordcloud-board {
            max-width: 80%;
            height: auto;
        }

        .wordcloud-overlay {
            position: absolute; /* 절대 위치 설정 */
            top: 10%; /* 부모 컨테이너의 상단에서 10% 아래로 이동 */
            left: 10%; /* 부모 컨테이너의 왼쪽에서 10% 오른쪽으로 이동 */
            width: 40%; /* 부모 컨테이너의 너비의 40%로 설정 */
            height: 40%; /* 부모 컨테이너의 높이의 40%로 설정 */
            object-fit: contain; /* 이미지 비율을 유지하면서 크기 조정 */
            transform: translate(26%, 75%); /* 추가적으로 오른쪽과 아래로 이동 */
        }

        .wordcloud-right img {
            max-width: 80%;
            height: auto;
        }

        /* 세 번째 박스 스타일 */
        .basic-analysis-container {
            display: flex;
            justify-content: center;
            width: 100%;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            margin-top: 120px;
            margin-bottom: 20px;
            max-width: 1200px;
            position: relative; /* 부모 요소를 기준으로 자식 요소 위치를 절대 위치로 설정 가능 */
        }

        .basic-analysis-left {
            flex: 1;
            text-align: left;
            padding: 10px;
            position: relative;
        }

        .basic-analysis-left .basic-analysis-half {
            width: 500px; /* 고정된 크기로 설정 */
            max-width: none; /* 기본적으로 적용되는 max-width를 무시 */
            height: 350px; /* 고정된 크기로 설정 */
            margin: 0; /* 모든 여백 제거 */
            position: absolute; /* 부모 컨테이너의 하단에 고정 */
            bottom: 0; /* 부모 컨테이너의 하단에 위치 */
            left: 0; /* 왼쪽에 붙이기 */
        }

        .basic-analysis-right {
            flex: 1.8;
            position: relative;
            padding-left: 20px;
        }

        .basic-analysis-right .basic-analysis-speechbubble {
            width: 700px; /* 고정된 크기로 설정 */
            max-width: none; /* 기본적으로 적용되는 max-width를 무시 */
            height: 400px; /* 고정된 크기로 설정 */
            position: relative;
            margin-left: 50px; /* 이미지가 오른쪽으로 이동하도록 설정 */
        }

        .basic-analysis-right .basic-analysis-speechbubble-content {
            position: absolute;
            top: 10%;
            left: 35%;
            right: 10%;
            bottom: 10%;
            padding: 20px;
            font-size: 20px;
            color: #333;
            line-height: 1.5;
        }

        /* 네 번째 박스 스타일 */
        .custom-analysis-container {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 100%;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            max-width: 1200px;
            position: relative;
            margin-top: 120px;
            margin-bottom: 100px;
        }

        .custom-analysis-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 33%;
            margin-bottom: 20px;
            padding-left: 20px; /* 날짜 선택 버튼과 드롭다운 메뉴를 오른쪽으로 20px 이동 */
            transform: translateX(200px); /* 모든 내용을 오른쪽으로 이동 */
        }

        .date-selection-section {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 15px; /* 좌측상단위 두줄 사이 간격 */
        }

        .date-row,
        .filter-row {
            display: flex;
            align-items: center;
            gap: 10px; /* 좌측상단위 선택지들 사이 간격 */
        }

        .date-button {
            padding: 10px 15px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #CCFFCC;
            color: #333;
            cursor: pointer;
            width: auto;
            /* 두 줄 시작하는 위치 딱 맞출거면 주석풀기 margin: 0 10px; /* 버튼 간의 간격 조정 */
        }

        .date-button:hover {
            background-color: #80EB88;
            border-color: #80EB88;
        }

        .custom-dropdown-container1,
        .custom-dropdown-container2 {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 0 10px; /* 드롭다운과 텍스트, 돋보기 아이콘 간격 조정 */
        }

        .magnifier {
            cursor: pointer;
            max-width: 25px;
            height: auto;
        }

        .custom-image-container {
            flex: 1;
            display: flex;
            justify-content: flex-end;
        }

        .custom-analysis-half2 {
            width: 380px; /* 고정된 크기로 설정 */
            max-width: none; /* 기본적으로 적용되는 max-width를 무시 */
            height: 250px; /* 고정된 크기로 설정 */
            transform: translateX(-250px); /* 박스를 왼쪽으로 약간 이동 */
        }

        .custom-analysis-bottom {
            display: flex;
            justify-content: space-between;
            height: 67%;
        }

        .custom-analysis-half1 {
            width: 250px; /* 고정된 크기로 설정 */
            max-width: none; /* 기본적으로 적용되는 max-width를 무시 */
            height: 380px; /* 고정된 크기로 설정 */
            margin-left: 0; /* 박스의 왼쪽 벽에 공백 없이 딱 붙도록 설정 */
            transform: translateX(-25px); /* 박스를 왼쪽으로 약간 이동 */
        }

        .custom-rect-box {
            flex: 2.8;
            background-color: #CCFFCC;
            border-radius: 10px;
            padding: 60px;
            margin-left: 20px;
        }

        .custom-analysis-result {
            width: 90%; /* 박스의 너비에 맞게 조절 */
            height: auto; /* 높이는 비율에 맞게 자동 조절 */
            border-radius: 10px; /* 필요에 따라 둥근 모서리 적용 */
            transform: translateX(35px); /* 사진을 오른쪽으로 약간 이동 */
        }
    </style>
</head>
<body>

<!-- 네비게이션 바 -->
<div class="navbar">
    <div class="logo">
        <img src="/static/images/logo.png" alt="톡쏙이 로고">
    </div>
    <div class="nav-links">
        <form action="/TalkSsogo-server/TalkSsogi_server/src/main/resources/templates/login.html" method="get">
            <button type="submit">로그인</button>
        </form>
        <form action="/TalkSsogo-server/TalkSsogi_server/src/main/resources/templates/profile.html" method="get">
            <button type="submit">내 정보</button>
        </form>
        <form action="/help" method="get">
            <button type="submit">이용안내</button>
        </form>
    </div>
</div>

<div class="container">
    <div class="mascot-section">
        <img src="/static/images/smile.png" alt="화분이">
    </div>
    <div class="text-section">
        <h1>톡쏙이 - 카카오톡 대화 분석</h1>
        <p>톡쏙이를 통해 카카오톡 대화를 분석하고 다양한 결과를 확인해보세요! <br>파일을 업로드하면 분석이 시작됩니다.</p>
        <div class="upload-section">
            <input type="file" id="fileInput" accept=".txt">
            <button onclick="uploadFile()">분석 시작</button>
        </div>
        <div class="button-section">
            <div class="feature-button">워드 클라우드</div>
            <div class="feature-button">랭킹 분석</div>
            <div class="feature-button">활동 분석</div>
            <div class="feature-button">발신자 예측</div>
        </div>
    </div>
</div>

<!-- 두 번째 박스 - 워드 클라우드 박스 -->
<div class="container wordcloud-container">
    <div class="wordcloud-left">
        <div class="wordcloud-speech-bubble-container">
            <img src="/static/images/wordcloud_speechbubble.png" alt="말풍선" class="speech-bubble">
            <div class="wordcloud-dropdown-container">
                <select id="participantSelect" onchange="updateWordCloud()">
                    <option value="participant0">전체</option>
                    <option value="participant1">참여자 1</option>
                    <option value="participant2">참여자 2</option>
                    <option value="participant3">참여자 3</option>
                    <!-- 추가적인 참여자 옵션들 -->
                </select>
                <span class="label" id="wordCloudLabel">의 워드 클라우드</span>
                <img src="/static/images/magnifier.png" alt="돋보기" class="magnifier" onclick="showWordCloud()">
            </div>
        </div>
        <div class="rounded-box">
            <b>워드 클라우드란?</b> <br>
            단어나 문구 등의 중요도에 따라 크기나 색상 등을 다르게 표현하여 강조하고 싶은 내용을 직관적으로 파악할 수 있도록 하는 시각화 기법.
        </div>
    </div>
    <div class="wordcloud-right">
        <div class="wordcloud-image-container">
            <img src="/static/images/wordcloud_board.png" alt="워드 클라우드 배경" class="wordcloud-board">
            <img src="/static/images/wordcloud.png" alt="워드 클라우드" class="wordcloud-overlay">
        </div>
    </div>
</div>

<!-- 세 번째 박스 -->
<div class="basic-analysis-container">
    <div class="basic-analysis-left">
        <img src="/static/images/basic_analysis_half.png" alt="기본 분석 캐릭터" class="basic-analysis-half">
    </div>
    <div class="basic-analysis-right">
        <img src="/static/images/basic_analysis_speechbubble.png" alt="기본 분석 말풍선" class="basic-analysis-speechbubble">
        <div class="basic-analysis-speechbubble-content">
            <!-- 여기에 기본 분석 텍스트를 추가합니다 -->
            <p><b>메시지 수가 가장 많았던 날:</b> <br> <b>20XX-XX-XX(XXXX건)</b> <br><br><b>대화를 하지 않은 날:</b> <br> <b>20XX-XX-XX</b> <br><br> <b>평균적으로 가장 활발한 시간대:</b> <br> <b>XX-XX(XXX건)</b></p> <br>
        </div>
    </div>
</div>

<!-- 네 번째 박스 -->
<div class="custom-analysis-container">
    <!-- 윗부분 1/3 -->
    <div class="custom-analysis-top">
        <div class="date-selection-section">
            <!-- 날짜 선택 버튼과 드롭다운 메뉴 두 줄 -->
            <div class="date-row">
                <input type="date" id="startDate" class="date-button">
                <span>부터</span>
                <input type="date" id="endDate" class="date-button">
                <span>까지 중에서</span>
            </div>
            <div class="filter-row">
                <select id="participantSelect_custom_analysis" class="custom-dropdown-container1">
                    <option value="participant0">전체</option>
                    <option value="participant1">참여자 1</option>
                    <option value="participant2">참여자 2</option>
                    <option value="participant3">참여자 3</option>
                    <!-- 추가적인 참여자 옵션들 -->
                </select>
                <span>의</span>
                <select id="OptionSelect" class="custom-dropdown-container2">
                    <option value="participant0">보낸 메시지 수 그래프</option>
                    <option value="participant1">활발한 시간대 그래프</option>
                    <option value="participant2">대화를 보내지 않은 날짜</option>
                    <!-- 추가적인 맞춤분석 옵션들 -->
                </select>
                <img src="/static/images/magnifier.png" alt="돋보기" class="magnifier">
            </div>
        </div>
        <div class="custom-image-container">
            <img src="/static/images/custom_analysis_half2.png" alt="맞춤 분석 캐릭터 2" class="custom-analysis-half2">
        </div>
    </div>

    <!-- 아랫부분 2/3 -->
    <div class="custom-analysis-bottom">
        <div class="custom-image-container">
            <img src="/static/images/custom_analysis_half1.png" alt="맞춤 분석 캐릭터 1" class="custom-analysis-half1">
        </div>
        <div class="custom-rect-box">
            <img src="/static/images/custom_analysis_result.png" alt="맞춤 분석 결과" class="custom-analysis-result">
        </div>
    </div>
</div>

<script>
    function uploadFile() {
        const fileInput = document.getElementById('fileInput');

        if (fileInput.files.length === 0) {
            alert('파일을 선택하세요.');
            return;
        }

        const file = fileInput.files[0];
        const formData = new FormData();
        formData.append('file', file);

        fetch('/api/uploadfile', {
            method: 'POST',
            body: formData
        })
            .then(response => response.json())
            .then(data => {
                alert('분석이 완료되었습니다!');
            })
            .catch(error => {
                alert('파일 업로드 또는 분석 중 오류가 발생했습니다.');
                console.error('Error:', error);
            });
    }

    function updateWordCloud() {
        const participantSelect = document.getElementById('participantSelect');
        const selectedParticipant = participantSelect.options[participantSelect.selectedIndex].text;
        const wordCloudLabel = document.getElementById('wordCloudLabel');

        // 선택한 참여자에 따라 내용 업데이트
        wordCloudLabel.textContent = `의 워드 클라우드`; // `${selectedParticipant}의 워드 클라우드`는 보기에 별로잖아요 그쵸
    }

    function showWordCloud() {
        const wordCloudImage = document.getElementById('wordCloudImage');

        // 워드 클라우드 이미지를 동적으로 업데이트하는 로직을 여기에 추가할 수 있습니다.
        // 예를 들어, fetch()를 사용하여 서버에서 워드 클라우드 이미지를 가져오는 로직을 추가할 수 있습니다.

        // 워드 클라우드 이미지를 표시
        wordCloudImage.style.display = 'block';
    }
</script>

</body>
</html>